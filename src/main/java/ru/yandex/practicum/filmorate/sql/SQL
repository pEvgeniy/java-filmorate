CREATE TABLE genre (
	genre_id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"name" varchar(128) NOT NULL,
	CONSTRAINT genre_pk PRIMARY KEY (genre_id)
);

CREATE TABLE users (
	user_id int4 NOT NULL,
	login varchar(255) NOT NULL,
	"name" varchar(255) NULL,
	email varchar(255) NOT NULL,
	birthday date NOT NULL,
	CONSTRAINT users_pk PRIMARY KEY (user_id)
);

CREATE TABLE films (
	film_id int4 NOT NULL,
	"name" varchar(255) NOT NULL,
	description varchar(255) NOT NULL,
	release_date date NOT NULL,
	rating varchar(255) NOT NULL,
	genre_id int4 NOT NULL,
	CONSTRAINT films_pk PRIMARY KEY (film_id),
	CONSTRAINT films_fk FOREIGN KEY (genre_id) REFERENCES genre(genre_id)
);

CREATE TABLE friends (
	user_id int4 NOT NULL,
	friend_id int4 NOT NULL,
	friendship_status varchar(255) NOT NULL,
	CONSTRAINT friends_fk FOREIGN KEY (user_id) REFERENCES users(user_id),
	CONSTRAINT friends_fk_1 FOREIGN KEY (friend_id) REFERENCES users(user_id)
);

CREATE TABLE likes (
	user_id int4 NOT NULL,
	film_id int4 NOT NULL,
	CONSTRAINT likes_fk FOREIGN KEY (user_id) REFERENCES users(user_id),
	CONSTRAINT likes_fk_1 FOREIGN KEY (film_id) REFERENCES films(film_id)
);